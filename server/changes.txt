# Project Changelog

## Summary

This update introduces a robust Role-Based Access Control (RBAC) system to the backend, enhancing the security and structure of the application. All API endpoints are now protected and require specific user roles for access.

## Key Changes

### 1. Feature: Role-Based Access Control (RBAC)

- **New Authentication Middleware:** A new authentication middleware has been implemented (`src/middleware/auth.ts`). This middleware is now responsible for verifying user roles and permissions before allowing access to an API endpoint.

- **Role Hierarchy:** A clear role hierarchy has been defined in `src/util/roles.ts`. The roles are, in order of permission level (highest to lowest):
    - `admin`: Full access to all resources.
    - `agency`: Access to agency, talent, and client resources.
    - `talent`: Access to talent and client resources.
    - `client`: Access to client-specific resources.

- **JWT Service:** A dedicated service for handling JSON Web Tokens (JWT) has been created (`src/util/jwt.ts`). This service manages the creation and verification of tokens, centralizing token-related logic.

- **Endpoint Protection:** All existing API routes have been updated to utilize the new RBAC middleware, ensuring that only users with the appropriate roles can access them. For example:
    - Admin-only routes (e.g., managing agencies, tasks, teams).
    - Agency-level routes (e.g., managing projects, talents).
    - Client-level routes (e.g., managing messages).

## Impact

This is a foundational security and architectural improvement. It prevents unauthorized access to data and provides a scalable framework for managing user permissions as the application grows.
